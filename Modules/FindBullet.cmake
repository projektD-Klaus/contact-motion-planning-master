include(FindPackageHandleStandardArgs)

file(
	GLOB
	BULLET_INCLUDE_PATHS
	$ENV{BULLETDIR}/include/bullet
	$ENV{HOME}/include/bullet
	/usr/local/include/bullet
	/usr/include/bullet
	$ENV{ProgramW6432}/bullet*/include/bullet
	$ENV{ProgramFiles}/bullet*/include/bullet
	$ENV{ProgramW6432}/rl*/include/bullet
	$ENV{ProgramFiles}/rl*/include/bullet
)

file(
	GLOB
	BULLET_LIBRARY_PATHS
	$ENV{BULLETDIR}/lib
	$ENV{HOME}/lib
	/usr/local/lib
	/usr/lib
	$ENV{ProgramW6432}/bullet*/lib
	$ENV{ProgramFiles}/bullet*/lib
	$ENV{ProgramW6432}/rl*/lib
	$ENV{ProgramFiles}/rl*/lib
)

find_path(
	BULLET_INCLUDE_DIRS
	NAMES
	Bullet-C-Api.h
	HINTS
	${BULLET_INCLUDE_PATHS}
)

find_library(
	BULLET_COLLISION_LIBRARY_DEBUG
	NAMES
	bulletcollisiond BulletCollisiond BulletCollision_debug
	HINTS
	${BULLET_LIBRARY_PATHS}
)

find_library(
	BULLET_COLLISION_LIBRARY_RELEASE
	NAMES
	bulletcollision BulletCollision
	HINTS
	${BULLET_LIBRARY_PATHS}
)

find_library(
	BULLET_CONVEXDECOMPOSITION_LIBRARY_DEBUG
	NAMES
	convexdecompositiond ConvexDecompositiond ConvexDecomposition_debug
	HINTS
	${BULLET_LIBRARY_PATHS}
)

find_library(
	BULLET_CONVEXDECOMPOSITION_LIBRARY_RELEASE
	NAMES
	convexdecomposition ConvexDecomposition
	HINTS
	${BULLET_LIBRARY_PATHS}
)

find_library(
	BULLET_DYNAMICS_LIBRARY_DEBUG
	NAMES
	bulletdynamicsd BulletDynamicsd BulletDynamics_debug
	HINTS
	${BULLET_LIBRARY_PATHS}
)

find_library(
	BULLET_DYNAMICS_LIBRARY_RELEASE
	NAMES
	bulletdynamics BulletDynamics
	HINTS
	${BULLET_LIBRARY_PATHS}
)

find_library(
	BULLET_MATH_LIBRARY_DEBUG
	NAMES
	bulletmathd LinearMathd LinearMath_debug
	HINTS
	${BULLET_LIBRARY_PATHS}
)

find_library(
	BULLET_MATH_LIBRARY_RELEASE
	NAMES
	bulletmath LinearMath
	HINTS
	${BULLET_LIBRARY_PATHS}
)

find_library(
	BULLET_SOFTBODY_LIBRARY_DEBUG
	NAMES
	bulletsoftbodyd BulletSoftBodyd BulletSoftBody_debug
	HINTS
	${BULLET_LIBRARY_PATHS}
)

find_library(
	BULLET_SOFTBODY_LIBRARY_RELEASE
	NAMES
	bulletsoftbody BulletSoftBody
	HINTS
	${BULLET_LIBRARY_PATHS}
)

foreach(LIBRARY BULLET_COLLISION_LIBRARY BULLET_CONVEXDECOMPOSITION_LIBRARY BULLET_DYNAMICS_LIBRARY BULLET_MATH_LIBRARY BULLET_SOFTBODY_LIBRARY)
	set(BULLET_LIBRARY ${LIBRARY})
	
	if(${LIBRARY}_DEBUG AND NOT ${LIBRARY}_RELEASE)
		set(${BULLET_LIBRARY} ${${LIBRARY}_DEBUG})
	endif(${LIBRARY}_DEBUG AND NOT ${LIBRARY}_RELEASE)
	
	if(${LIBRARY}_RELEASE AND NOT ${LIBRARY}_DEBUG)
		set(${BULLET_LIBRARY} ${${LIBRARY}_RELEASE})
	endif(${LIBRARY}_RELEASE AND NOT ${LIBRARY}_DEBUG)
	
	if(${LIBRARY}_DEBUG AND ${LIBRARY}_RELEASE)
		set(${BULLET_LIBRARY} debug ${${LIBRARY}_DEBUG} optimized ${${LIBRARY}_RELEASE})
	endif(${LIBRARY}_DEBUG AND ${LIBRARY}_RELEASE)
endforeach(LIBRARY)

set(
	BULLET_LIBRARIES
	${BULLET_COLLISION_LIBRARY}
	${BULLET_CONVEXDECOMPOSITION_LIBRARY}
	${BULLET_DYNAMICS_LIBRARY}
	${BULLET_MATH_LIBRARY}
	${BULLET_SOFTBODY_LIBRARY}
)

find_package_handle_standard_args(
	Bullet
	DEFAULT_MSG
	BULLET_INCLUDE_DIRS
	BULLET_COLLISION_LIBRARY
#	BULLET_CONVEXDECOMPOSITION_LIBRARY
	BULLET_DYNAMICS_LIBRARY
	BULLET_MATH_LIBRARY
	BULLET_SOFTBODY_LIBRARY
)

mark_as_advanced(
	BULLET_INCLUDE_DIRS
	BULLET_COLLISION_LIBRARY
	BULLET_COLLISION_LIBRARY_DEBUG
	BULLET_COLLISION_LIBRARY_RELEASE
	BULLET_CONVEXDECOMPOSITION_LIBRARY
	BULLET_CONVEXDECOMPOSITION_LIBRARY_DEBUG
	BULLET_CONVEXDECOMPOSITION_LIBRARY_RELEASE
	BULLET_DYNAMICS_LIBRARY
	BULLET_DYNAMICS_LIBRARY_DEBUG
	BULLET_DYNAMICS_LIBRARY_RELEASE
	BULLET_LIBRARIES
	BULLET_MATH_LIBRARY
	BULLET_MATH_LIBRARY_DEBUG
	BULLET_MATH_LIBRARY_RELEASE
	BULLET_SOFTBODY_LIBRARY
	BULLET_SOFTBODY_LIBRARY_DEBUG
	BULLET_SOFTBODY_LIBRARY_RELEASE
) 
